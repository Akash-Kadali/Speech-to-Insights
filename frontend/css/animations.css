/* ============================================================
   HIREX • animations.css (v2.1.0 — Unified Motion System)
   ------------------------------------------------------------
   Corrected, enhanced, and upgraded:
   - clearer motion tokens, accessible defaults, color tokens
   - safer will-change usage, reduced-motion support, stagger fixes
   - optional X/Y GPU-friendly transforms, scroll-timeline-ready
   Author: Sri Akash Kadali (refined)
   ============================================================ */

/* -------------------- Motion + Color Tokens -------------------- */
:root{
  /* easing */
  --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
  --ease-in: cubic-bezier(0.5, 0, 0.75, 0);
  --ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
  --ease-elastic: cubic-bezier(0.175, 0.885, 0.32, 1.275);

  /* durations */
  --dur-fast: 0.22s;
  --dur-med: 0.52s;
  --dur-slow: 0.9s;

  --stagger: 0.08s;
  --z-toast: 9999;

  /* colors (semantic tokens) */
  --accent: 110 168 254; /* use as rgb token with alpha if needed */
  --accent-0: rgba(var(--accent), 0.06);
  --accent-1: rgba(var(--accent), 0.15);
  --accent-2: rgba(var(--accent), 0.35);
  --fg-on-accent: #fff;
  --toast-bg: rgba(17, 24, 39, 0.85); /* better contrast on toast */
}

/* Small helper for GPU friendly transforms */
.u-gpu {
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* -------------------- Page Entrance -------------------- */
.page-enter {
  animation: hirex-enter var(--dur-med) var(--ease-out) both;
  will-change: transform, opacity;
}
@keyframes hirex-enter {
  from { opacity: 0; transform: translateY(28px) scale(0.992); filter: blur(6px); }
  70% { opacity: 1; transform: translateY(-4px) scale(1.01); filter: blur(0); }
  to { opacity: 1; transform: translateY(0) scale(1); filter: blur(0); }
}

/* -------------------- Idle / Controlled animations -------------------- */
/* default hidden state for animatable elements */
.anim, [data-anim] {
  opacity: 0;
  transform: translateZ(0);
  will-change: opacity, transform;
  /* do not impose animation until .is-animated or explicit class */
}
/* simple class toggle to reveal */
.anim.is-animated, [data-anim].is-animated {
  opacity: 1;
}

/* -------------------- Core Animation Presets -------------------- */
@keyframes hirex-fade      { from { opacity: 0; } to { opacity: 1; } }
@keyframes hirex-rise      { from { opacity: 0; transform: translateY(14px); } to { opacity: 1; transform: translateY(0); } }
@keyframes hirex-slide-left{ from { opacity: 0; transform: translateX(22px); } to { opacity: 1; transform: translateX(0); } }
@keyframes hirex-slide-right{from { opacity: 0; transform: translateX(-22px);} to { opacity: 1; transform: translateX(0); } }
@keyframes hirex-scale     { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
@keyframes hirex-blur      { from { opacity: 0; filter: blur(6px); } to { opacity: 1; filter: blur(0); } }
@keyframes hirex-blur-rise { from { opacity: 0; transform: translateY(12px); filter: blur(6px); } to { opacity: 1; transform: translateY(0); filter: blur(0); } }

.anim.fade, [data-anim~="fade"]         { animation: hirex-fade var(--dur-med) var(--ease-out) both; }
.anim.rise, [data-anim~="rise"]         { animation: hirex-rise var(--dur-med) var(--ease-out) both; }
.anim.slide-left, [data-anim~="slide-left"] { animation: hirex-slide-left var(--dur-med) var(--ease-out) both; }
.anim.slide-right, [data-anim~="slide-right"]{ animation: hirex-slide-right var(--dur-med) var(--ease-out) both; }
.anim.scale, [data-anim~="scale"]       { animation: hirex-scale var(--dur-med) var(--ease-elastic) both; }
.anim.blur, [data-anim~="blur"]         { animation: hirex-blur var(--dur-med) var(--ease-out) both; }
.anim.blur-rise, [data-anim~="blur-rise"] { animation: hirex-blur-rise var(--dur-med) var(--ease-out) both; }

/* -------------------- Futuristic Motion (tune for accessibility) -------------------- */

/* Neon Depth (gentle breathing glow; not for large areas) */
@keyframes hirex-depth {
  0%,100% { transform: scale(1); box-shadow: 0 0 0 rgba(var(--accent), 0); }
  50%    { transform: scale(1.02); box-shadow: 0 0 28px rgba(var(--accent), .26); }
}
.anim.depth, [data-anim~="depth"] {
  animation: hirex-depth 1.8s var(--ease-elastic) infinite alternate;
  will-change: transform, box-shadow;
}

/* Holo Pulse (subtle luminance) */
@keyframes hirex-pulse {
  0%   { filter: brightness(1) saturate(1); }
  50%  { filter: brightness(1.22) saturate(1.15); }
  100% { filter: brightness(1) saturate(1); }
}
.anim.pulse, [data-anim~="pulse"] {
  animation: hirex-pulse 2.6s ease-in-out infinite;
  will-change: filter;
}

/* Orbit Glow (use sparingly for badges/logos) */
@keyframes hirex-orbit {
  0%   { transform: rotate(0deg) scale(1); filter: drop-shadow(0 0 0 rgba(var(--accent),0)); }
  50%  { transform: rotate(180deg) scale(1.04); filter: drop-shadow(0 0 10px rgba(var(--accent),0.5)); }
  100% { transform: rotate(360deg) scale(1); filter: drop-shadow(0 0 0 rgba(var(--accent),0)); }
}
.anim.orbit, [data-anim~="orbit"] {
  animation: hirex-orbit 3.2s linear infinite;
}

/* Shimmer Sweep (light holographic sweep) */
@keyframes hirex-shimmer {
  0% { background-position: -220% 0; }
  100% { background-position: 220% 0; }
}
.anim.shimmer, [data-anim~="shimmer"] {
  background: linear-gradient(110deg, rgba(255,255,255,0.05) 6%, rgba(255,255,255,0.28) 18%, rgba(255,255,255,0.05) 34%);
  background-size: 220% 100%;
  animation: hirex-shimmer 2.8s linear infinite;
  will-change: background-position;
}

/* Parallax Fade (gentle depth entrance) */
@keyframes hirex-parallax {
  from { opacity: 0; transform: translateY(40px) scale(0.96); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}
[data-anim~="parallax"] { animation: hirex-parallax var(--dur-slow) var(--ease-out) both; }

/* -------------------- Hover Micro-motions -------------------- */
.hover-lift {
  transition: transform var(--dur-fast) var(--ease-out), box-shadow var(--dur-fast) var(--ease-out);
  will-change: transform, box-shadow;
}
.hover-lift:hover, .hover-lift:focus {
  transform: translateY(-4px);
  box-shadow: 0 18px 42px rgba(var(--accent), 0.22);
}
.hover-tilt { transition: transform var(--dur-med) var(--ease-elastic); }
.hover-tilt:hover, .hover-tilt:focus { transform: rotate3d(1,1,0,4deg); }

/* Magnetic hover (slight attraction) */
.hover-magnet { transition: transform var(--dur-fast) var(--ease-out); }
.hover-magnet:hover, .hover-magnet:focus { transform: translateY(-2px) scale(1.02); }

/* Floating pulse (icons/buttons) */
@keyframes hirex-float { 0%,100%{ transform: translateY(0);} 50%{ transform: translateY(-4px);} }
.anim.float, [data-anim~="float"] { animation: hirex-float 3s ease-in-out infinite; }

/* -------------------- Toast Motion & Styles -------------------- */
/* Ensure a11y contrast and neutral background by default */
#toast {
  position: fixed;
  left: 50%;
  bottom: -100px;
  transform: translateX(-50%) scale(0.98);
  opacity: 0;
  z-index: var(--z-toast);
  padding: 0.6rem 1.1rem;
  border-radius: 10px;
  background: var(--toast-bg);
  color: var(--fg-on-accent);
  backdrop-filter: blur(8px) saturate(1.05);
  font-size: 0.95rem;
  font-weight: 500;
  pointer-events: none; /* prevents accidental focus capture */
  transition:
    opacity var(--dur-med) var(--ease-bounce),
    bottom var(--dur-med) var(--ease-bounce),
    transform var(--dur-med) var(--ease-bounce);
  box-shadow: 0 8px 30px rgba(2,6,23,0.45);
}
#toast.visible {
  bottom: 24px;
  opacity: 1;
  transform: translateX(-50%) scale(1);
  pointer-events: auto;
}

/* small, accessible focus style when interactive */
#toast:focus { outline: 2px solid rgba(var(--accent),0.35); }

/* -------------------- Spinner -------------------- */
.spinner { display: inline-block; vertical-align: middle; }
@keyframes hirex-spin { to { transform: rotate(360deg); } }
.spinner { animation: hirex-spin 0.9s linear infinite; }

/* -------------------- Stagger Utilities (deterministic) -------------------- */
/* Provide up to 12 child delays (enough for most UIs) */
[data-stagger] > * { opacity: 0; transform: translateY(10px); will-change: opacity, transform; }
[data-stagger].is-animated > * { animation: hirex-rise var(--dur-fast) var(--ease-out) both; }

/* explicit nth-child delays (deterministic, avoids custom property pitfalls) */
[data-stagger].is-animated > *:nth-child(1)  { animation-delay: calc(var(--stagger) * 1); }
[data-stagger].is-animated > *:nth-child(2)  { animation-delay: calc(var(--stagger) * 2); }
[data-stagger].is-animated > *:nth-child(3)  { animation-delay: calc(var(--stagger) * 3); }
[data-stagger].is-animated > *:nth-child(4)  { animation-delay: calc(var(--stagger) * 4); }
[data-stagger].is-animated > *:nth-child(5)  { animation-delay: calc(var(--stagger) * 5); }
[data-stagger].is-animated > *:nth-child(6)  { animation-delay: calc(var(--stagger) * 6); }
[data-stagger].is-animated > *:nth-child(7)  { animation-delay: calc(var(--stagger) * 7); }
[data-stagger].is-animated > *:nth-child(8)  { animation-delay: calc(var(--stagger) * 8); }
[data-stagger].is-animated > *:nth-child(9)  { animation-delay: calc(var(--stagger) * 9); }
[data-stagger].is-animated > *:nth-child(10) { animation-delay: calc(var(--stagger) * 10); }
[data-stagger].is-animated > *:nth-child(11) { animation-delay: calc(var(--stagger) * 11); }
[data-stagger].is-animated > *:nth-child(12) { animation-delay: calc(var(--stagger) * 12); }

/* helper convenience classes (explicit delays) */
.anim-delay-1 { animation-delay: calc(var(--stagger) * 1) !important; }
.anim-delay-2 { animation-delay: calc(var(--stagger) * 2) !important; }
.anim-delay-3 { animation-delay: calc(var(--stagger) * 3) !important; }
.anim-delay-4 { animation-delay: calc(var(--stagger) * 4) !important; }
.anim-delay-5 { animation-delay: calc(var(--stagger) * 5) !important; }

/* -------------------- Reduced Motion (strict) -------------------- */
@media (prefers-reduced-motion: reduce) {
  :root { --dur-fast: 0.001s; --dur-med: 0.001s; --dur-slow: 0.001s; --stagger: 0s; }
  *, *::before, *::after {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
    scroll-behavior: auto !important;
  }
  #toast { transition: none !important; }
}

/* -------------------- Scroll Timeline Ready (if supported) -------------------- */
@supports (animation-timeline: view()) {
  [data-scroll-anim="fade-in"] {
    animation-name: hirex-fade;
    animation-timeline: view();
    animation-range: entry 0% cover 30%;
    animation-duration: var(--dur-med);
    animation-timing-function: var(--ease-out);
  }
  [data-scroll-anim="rise"] {
    animation-name: hirex-rise;
    animation-timeline: view();
    animation-range: entry 0% cover 30%;
    animation-duration: var(--dur-med);
    animation-timing-function: var(--ease-out);
  }
  [data-scroll-anim="shimmer"] {
    animation-name: hirex-shimmer;
    animation-timeline: view();
    animation-range: entry 0% cover 50%;
    animation-duration: 2.8s;
    animation-iteration-count: infinite;
  }
}

/* -------------------- Small accessibility tweaks -------------------- */
/* Remove motion on focus-visible for keyboard users who may not want motion during navigation */
:focus:not(:focus-visible) { outline: none; }
:focus-visible { outline: 2px solid rgba(var(--accent), 0.45); outline-offset: 2px; }

/* -------------------- Developer notes --------------------
 - Use [data-anim="fade rise"] or .anim.fade.rise and toggle .is-animated for controlled reveals.
 - Keep heavy effects (.shimmer, .orbit, .depth) limited to small elements (icons, badges).
 - Use prefers-reduced-motion to automatically disable long-running effects.
 - The stagger block uses explicit nth-child rules to ensure deterministic delays.
 - Colors use an rgb token --accent for easy alpha blending.
 ---------------------------------------------------------- */
