/* ============================================================
   Speech to Insights — base.css (final corrected)
   • Refined core tokens, typography, layout, and accessibility baseline
   • Defensive, responsive, and theme-aware
   • Author: upgraded from Sri Akash Kadali originals (corrected)
   ============================================================ */

/* ------------------------------ Fonts (load in HTML head) ------------------------------
   Recommended:
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
   -------------------------------------------------------------------------------------- */

/* ------------------------------ Tokens ------------------------------ */
:root{
  /* layout */
  --container-width: 1120px;
  /* Compact sidebar default to reduce footprint — aligns with components.css */
  --sidebar-width: 200px;
  --radius-lg: 14px;
  --radius-sm: 10px;
  --gap-xs: .25rem;
  --gap-sm: .5rem;
  --gap-md: 1rem;
  --gap-lg: 1.5rem;

  /* brand (rgb for alpha-friendly blending) */
  --accent-rgb: 110,168,254;
  --accent: rgb(var(--accent-rgb));
  --accent-soft: rgba(var(--accent-rgb), .14);

  /* surfaces (dark defaults) */
  --bg-layer-1: #0a1020;
  --bg: radial-gradient(1000px 600px at 70% -10%, rgba(var(--accent-rgb),.06), transparent 60%),
         radial-gradient(900px 500px at -10% 30%, rgba(159,120,255,.04), transparent 60%),
         var(--bg-layer-1);
  --surface-1: rgba(255,255,255,.05);
  --surface-2: rgba(255,255,255,.10);
  --surface-3: rgba(255,255,255,.16);
  --border: rgba(255,255,255,.12);

  /* text */
  --text-100: #ffffff;
  --text-200: #eef4ff;
  --text-400: #b8c1d9;
  --text-600: #8a95b6;

  /* semantic */
  --success: #1fd6a9;
  --warning: #ffcf5f;
  --danger: #ff7b7b;
  --info: #7bb7ff;

  /* shadows */
  --shadow-deep: 0 12px 40px rgba(0,0,0,.36);
  --shadow-soft: 0 8px 28px rgba(0,0,0,.18);

  /* typography */
  --font-sans: "Outfit", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --base-font-size: 16px;
  --container: 1120px;

  /* motion */
  --ease-out: cubic-bezier(.16,1,.3,1);
  --ease-in: cubic-bezier(.5,0,.75,0);
  --dur-1: .16s;
  --dur-2: .32s;
  --dur-3: .5s;

  /* elevation */
  --z-toast: 9999;

  /* small vertical offset to leave breathing room for a compact top header if used */
  --header-vertical-offset: 12px;

  color-scheme: dark;
}

/* ------------------------------ Light theme ------------------------------ */
[data-theme="light"]{
  --bg: linear-gradient(180deg,#f9fbff 0%,#e8efff 100%);
  --surface-1: rgba(255,255,255,0.92);
  --surface-2: rgba(0,0,0,0.06);
  --surface-3: rgba(0,0,0,0.12);
  --border: rgba(0,0,0,0.08);
  --text-100: #0a1020;
  --text-200: #1c233b;
  --text-400: #4b4f68;
  --text-600: #6a6d82;
  --accent: #6a6cff;
  --accent-rgb: 106,108,255;
  --accent-soft: rgba(106,108,255,.12);
  --shadow-deep: 0 8px 28px rgba(0,0,0,.12);
  color-scheme: light;
}

/* ------------------------------ Base / Reset ------------------------------ */
html{
  font-size: var(--base-font-size);
  scroll-behavior: smooth;
  -webkit-text-size-adjust: 100%;
}
*,
*::before,
*::after { box-sizing: border-box; margin: 0; padding: 0; }

body{
  min-height: 100vh;
  background: var(--bg);
  color: var(--text-100);
  font-family: var(--font-sans);
  font-weight: 400;
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  letter-spacing: 0.01em;
  transition: background .45s var(--ease-out), color .35s var(--ease-out);
  -webkit-tap-highlight-color: transparent;
  /* ensure header offset does not make sidebar overlap with fixed header */
  padding-top: var(--header-vertical-offset);
}

/* ------------------------------ Accessibility helpers ------------------------------ */
.sr-only {
  position: absolute !important;
  width: 1px; height: 1px;
  padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0,0,0,0);
  white-space: nowrap; border: 0;
}
.visually-hidden { visibility: hidden !important; }
[hidden]{ display: none !important; }

/* Focus styles only for keyboard users via JS toggle (.user-is-tabbing added on keydown tab) */
.user-is-tabbing :focus {
  outline: 3px solid rgba(var(--accent-rgb), .26);
  outline-offset: 3px;
  border-radius: 6px;
}

/* make focus-visible behavior robust */
:focus { outline: none; }
:focus-visible {
  outline: 3px solid rgba(var(--accent-rgb), .22);
  outline-offset: 3px;
  border-radius: 6px;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  :root { --dur-1: .001s; --dur-2: .001s; --dur-3: .001s; }
  * { scroll-behavior: auto !important; }
  .card, a, button { transition: none !important; animation: none !important; }
}

/* ------------------------------ Containers ------------------------------ */
.container{
  max-width: var(--container-width);
  margin-inline: auto;
  padding-inline: clamp(.75rem, 4vw, 2.5rem);
  padding-block: clamp(1rem, 4vw, 2rem);
}

/* ------------------------------ Typography ------------------------------ */
h1,h2,h3,h4,h5,h6{
  color: var(--text-100);
  line-height: 1.15;
  font-weight: 700;
  letter-spacing: -0.02em;
  margin: 0 0 .5rem 0;
}
h1{ font-size: clamp(1.5rem, 3.2vw, 2.4rem); }
h2{ font-size: clamp(1.15rem, 2.3vw, 1.8rem); }
h3{ font-size: clamp(1.05rem, 1.8vw, 1.2rem); }
p{ color: var(--text-200); margin-bottom: .75rem; }
small, .muted { color: var(--text-600); font-size: .9rem; }

/* code & pre */
code, kbd, pre {
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  font-size: .95em;
  background: var(--surface-1);
  border: 1px solid var(--border);
  color: var(--text-200);
  border-radius: var(--radius-sm);
  padding: .12rem .35rem;
}
pre { padding: 1rem; overflow: auto; border-radius: 8px; }

/* ------------------------------ Links ------------------------------ */
a {
  color: var(--accent);
  text-decoration: none;
  transition: color var(--dur-2) var(--ease-out), opacity var(--dur-2) var(--ease-out);
}
a:hover, a:focus { opacity: .92; text-decoration: underline; }

/* ------------------------------ Buttons & form controls ------------------------------ */
button{
  font: 600 1rem/1 var(--font-sans);
  display: inline-flex;
  gap: .5rem;
  align-items: center;
  justify-content: center;
  padding: .56rem .85rem;
  border-radius: calc(var(--radius-lg) - 2px);
  border: none;
  background: linear-gradient(135deg, rgba(var(--accent-rgb),1), #9f78ff);
  color: #fff;
  box-shadow: 0 6px 20px rgba(var(--accent-rgb), .14);
  cursor: pointer;
  transition: transform var(--dur-1) var(--ease-out), box-shadow var(--dur-2) var(--ease-out), opacity var(--dur-2);
}
button:hover { transform: translateY(-1.5px); box-shadow: 0 10px 28px rgba(var(--accent-rgb), .16); }
button:disabled { cursor: not-allowed; opacity: .6; transform: none; box-shadow: none; }

/* inputs */
input, textarea, select {
  font: 500 1rem/1.2 var(--font-sans);
  color: var(--text-100);
  background: var(--surface-1);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: .56rem .75rem;
  transition: box-shadow var(--dur-2) var(--ease-out), border-color var(--dur-2) var(--ease-out);
}
input::placeholder, textarea::placeholder { color: var(--text-600); }
input:focus, textarea:focus, select:focus {
  outline: none;
  box-shadow: 0 6px 18px rgba(var(--accent-rgb), .12);
  border-color: var(--accent);
}

/* form field grouping */
.field { display: flex; flex-direction: column; gap: .35rem; margin-block: .8rem; }

/* ------------------------------ Cards & Sections ------------------------------ */
.card, section {
  background: var(--surface-1);
  border: 1px solid var(--surface-2);
  border-radius: var(--radius-lg);
  padding: clamp(.8rem, 2vw, 1.2rem);
  box-shadow: var(--shadow-deep);
  transition: transform var(--dur-2) var(--ease-out), box-shadow var(--dur-2) var(--ease-out);
}
.card:hover, .card:focus-within {
  transform: translateY(-3px);
  box-shadow: 0 18px 44px rgba(0,0,0,.42);
}
.card + .card { margin-top: var(--gap-lg); }

/* header/nav/footer styling helpers */
header, nav { backdrop-filter: saturate(120%) blur(8px); border-bottom: 1px solid var(--surface-2); }
footer { color: var(--text-600); border-top: 1px solid var(--surface-2); padding: var(--gap-md) 0; text-align: center; }

/* ------------------------------ Tables ------------------------------ */
table { width: 100%; border-collapse: collapse; border-spacing: 0; }
thead th { text-align: left; font-weight: 700; color: var(--text-200); background: rgba(255,255,255,.03); }
th, td { padding: .65rem .75rem; border-bottom: 1px solid var(--surface-2); }
tbody tr:hover { background: rgba(255,255,255,.02); }

/* ------------------------------ Utilities ------------------------------ */
.flex { display: flex; gap: var(--gap-md); }
.grid { display: grid; gap: var(--gap-md); }
.center { display: grid; place-items: center; }
.rounded { border-radius: var(--radius-lg) !important; }
.rounded-sm { border-radius: var(--radius-sm) !important; }

.text-muted { color: var(--text-600) !important; }
.text-secondary { color: var(--text-400) !important; }
.text-accent { color: var(--accent) !important; }

/* spacing helpers */
.mt-0 { margin-top: 0 !important; }
.mt-4 { margin-top: var(--gap-md) !important; }
.mb-4 { margin-bottom: var(--gap-md) !important; }
.p-0 { padding: 0 !important; }

/* hide utility */
.hidden { display: none !important; }

/* ------------------------------ Toast (global) ------------------------------ */
#toast {
  position: fixed;
  left: 50%;
  bottom: -120px;
  transform: translateX(-50%) translateY(0) scale(.98);
  opacity: 0;
  z-index: var(--z-toast);
  background: rgba(var(--accent-rgb), .10);
  backdrop-filter: blur(10px);
  color: #fff;
  padding: .65rem 1rem;
  border-radius: 10px;
  font-weight: 700;
  transition: bottom .42s var(--ease-out), opacity .42s var(--ease-out), transform .42s var(--ease-out);
  pointer-events: none;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
}
#toast.visible {
  bottom: 28px;
  opacity: 1;
  transform: translateX(-50%) translateY(-4px) scale(1);
  pointer-events: auto;
}

/* ------------------------------ Responsive ------------------------------ */
@media (max-width: 920px){
  :root { --container: 720px; }
}
@media (max-width: 880px){
  /* place page content full width on narrow screens */
  :root { --sidebar-width: 0; } /* components pick this up; the sidebar hides or becomes overlay */
  header, footer { padding-inline: 1rem; }
  .container { padding-inline: 1rem; }
  body { padding-top: 8px; }
}

/* ------------------------------ Print ------------------------------ */
@media print {
  *, *::before, *::after { box-shadow: none !important; background: #fff !important; color: #000 !important; }
  header, nav, footer { display: none !important; }
  section, .card { border: 1px solid #000 !important; }
}

/* ------------------------------ Developer notes ------------------------------
 - Prefer preloading fonts and avoid @import in production to reduce FOUT.
 - Toggle [data-theme="light"] on <html> or <body> to switch themes.
 - Add .user-is-tabbing to <body> when Tab key is detected to show high-contrast focus rings.
 - To reduce sidebar footprint site-wide adjust --sidebar-width in :root (or via body.compact-sidebar override).
 - This file is defensive — tokens defined at :root are safe to override via CSS variables.
 ------------------------------------------------------------------------------ */
